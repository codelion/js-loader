<html>
<head>
 <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<style>
.form-control-feedback {
position: relative;
display: inline;
top: 0;
line-height: 14px;
}
</style>

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdn.firebase.com/js/client/2.2.3/firebase.js"></script>

<script>
    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars;
    }

    var onSubmitComplete = function(error) {
        var contactForm = document.getElementById('contact-form');
        var contactSuccess = document.getElementById('contact-success');
        var contactError = document.getElementById('contact-error');
        var contactBtn = document.getElementById('btn-submit');
      contactBtn.disabled = false;
      if (error) {
        contactError.innerHTML = 'Sorry. Could not submit the error report.';
      } else {
        contactSuccess.innerHTML = 'Thanks for submitting your error report!';
        // hide the form
        contactForm.style.display = 'none';
      }
    };

    function reporterror(formObj) {
        // Store error information to firebase
        var contactForm = document.getElementById('contact-form');
        var contactSuccess = document.getElementById('contact-success');
        var contactError = document.getElementById('contact-error');
        var contactBtn = document.getElementById('btn-submit');
        var myFirebaseRef = new Firebase("https://epiclogger.firebaseio.com/errors");
        console.log(formObj.InputEmail.value);
        myFirebaseRef.push({
            'id' : true
          //'id' : getUrlVars()['id']
          //'email' : formObj.InputEmail.value,
          //'notes' : formObj.InputMessage.value,
          //'timestamp': Date.now()
        }, onSubmitComplete);
        console.log(contactBtn);     
        contactBtn.disabled = true;
        return false;
    }

</script>

</head>

<body>
<div class="container">
<p class="margin-bottom-30">
<strong>
We are sorry that you landed on this error page.
</strong>
</p>
<p>
<strong>
Let us know and we will get back to you once we fix the issue.
</strong>
</p>
<div class="row">
<div class="alert alert-success" id="contact-success" style="display:none"></div>
<div class="alert alert-danger" id="contact-error" style="display:none"></div>
  <form role="form" onsubmit="return reporterror(this)" id="contact-form">
    <div class="col-lg-6">
      <div class="well well-sm"><strong><i class="glyphicon glyphicon-ok form-control-feedback"></i> Required Field</strong></div>
      <div class="form-group">
        <label for="InputEmail">Your Email</label>
        <div class="input-group">
          <input type="email" class="form-control" id="InputEmail" name="InputEmail" placeholder="Enter Email" required  >
          <span class="input-group-addon"><i class="glyphicon glyphicon-ok form-control-feedback"></i></span></div>
      </div>
      <div class="form-group">
        <label for="InputMessage">Details/Notes on the Error (What were you trying to do?)</label>
        <div class="input-group">
          <textarea name="InputMessage" id="InputMessage" class="form-control" rows="5" required></textarea>
          <span class="input-group-addon"><i class="glyphicon glyphicon-ok form-control-feedback"></i></span></div>
      </div>
      <button type="submit" name="submit" id="btn-submit" value="Submit" class="btn btn-info pull-right">Submit Error</button>
    </div>
  </form>
</div>
</div>
</body>
</html>